---
description: Flutter101 é¡¹ç›®ç¼–ç è§„èŒƒä¸æ¶æ„åŸåˆ™
globs:
alwaysApply: yes
---

# Flutter101 é¡¹ç›®ç¼–ç è§„èŒƒä¸æ¶æ„åŸåˆ™

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„åŸåˆ™

### 1. GetX ç”Ÿæ€ç³»ç»Ÿä¼˜å…ˆ
- **çŠ¶æ€ç®¡ç†**: å¼ºåˆ¶ä½¿ç”¨ GetxController å’Œ Obx/GetBuilder
- **ä¾èµ–æ³¨å…¥**: å¿…é¡»ä½¿ç”¨ Get.putã€Get.lazyPut å’Œ Bindings
- **è·¯ç”±ç³»ç»Ÿ**: ä½¿ç”¨ GetMaterialApp å’Œ GetPage
- **ç½‘ç»œçŠ¶æ€**: ä½¿ç”¨ controller.obx() æ¨¡å¼å¤„ç†åŠ è½½/é”™è¯¯/æˆåŠŸçŠ¶æ€

### 2. Feature-First ç›®å½•ç»“æ„
```
lib/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ services/     # å…¨å±€æœåŠ¡ (NetworkService, etc.)
â”‚   â”‚   â”œâ”€â”€ utils/        # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ constants/    # å¸¸é‡
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ models/       # Freezed æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ services/     # API æœåŠ¡
â”‚   â”œâ”€â”€ routes/           # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ theme/            # ä¸»é¢˜é…ç½®
â””â”€â”€ features/
    â””â”€â”€ [feature_name]/
        â”œâ”€â”€ controllers/  # GetxController
        â”œâ”€â”€ views/        # UI ç•Œé¢
        â””â”€â”€ bindings/     # ä¾èµ–ç»‘å®š
```

### 3. æ•°æ®æ¨¡å‹è§„èŒƒ
- **å¿…é¡»ä½¿ç”¨ Freezed**: æ‰€æœ‰æ•°æ®æ¨¡å‹éƒ½å¿…é¡»ç”¨ @freezed æ³¨è§£
- **JSON åºåˆ—åŒ–**: ä½¿ç”¨ json_annotation å’Œ json_serializable
- **ä¸å¯å˜æ€§**: åˆ©ç”¨ Freezed ç¡®ä¿æ•°æ®ä¸å¯å˜æ€§

## ğŸ“ ç¼–ç è§„èŒƒ

### Controller å±‚è§„èŒƒ
```dart
// âœ… æ­£ç¡®çš„ Controller å†™æ³•
class HomeController extends GetxController with StateMixin<DataType> {
  final ApiService _apiService = Get.find<ApiService>();
  
  @override
  void onInit() {
    super.onInit();
    loadData();
  }
  
  void loadData() async {
    try {
      change(null, status: RxStatus.loading());
      final data = await _apiService.getData();
      change(data, status: RxStatus.success());
    } catch (e) {
      change(null, status: RxStatus.error(e.toString()));
    }
  }
}
```

### View å±‚è§„èŒƒ
```dart
// âœ… æ­£ç¡®çš„ View å†™æ³•
class HomeView extends GetView<HomeController> {
  const HomeView({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Title')),
      body: controller.obx(
        (data) => _buildSuccessContent(data!),
        onLoading: _buildLoadingContent(),
        onError: (error) => _buildErrorContent(error!),
        onEmpty: _buildEmptyContent(),
      ),
    );
  }
}
```

### Binding å±‚è§„èŒƒ
```dart
// âœ… æ­£ç¡®çš„ Binding å†™æ³•
class HomeBinding extends Bindings {
  @override
  void dependencies() {
    Get.lazyPut<ApiService>(() => ApiService());
    Get.lazyPut<HomeController>(() => HomeController());
  }
}
```

### ç½‘ç»œæœåŠ¡è§„èŒƒ
- **ç»Ÿä¸€ç½‘ç»œæœåŠ¡**: ä½¿ç”¨ NetworkService å°è£… Dio
- **é”™è¯¯å¤„ç†**: åœ¨ NetworkService å±‚ç»Ÿä¸€å¤„ç†ç½‘ç»œé”™è¯¯
- **æ‹¦æˆªå™¨**: åˆç†ä½¿ç”¨ Dio æ‹¦æˆªå™¨å¤„ç†æ—¥å¿—å’Œé”™è¯¯

## ğŸš« ç¦æ­¢çš„åšæ³•

### çŠ¶æ€ç®¡ç†
- âŒ ä¸è¦ä½¿ç”¨ StatefulWidget ç®¡ç†ä¸šåŠ¡é€»è¾‘
- âŒ ä¸è¦ç›´æ¥ä½¿ç”¨ setState
- âŒ ä¸è¦æ··ç”¨å…¶ä»–çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ (Provider, Bloc, Riverpod)

### ä¾èµ–ç®¡ç†
- âŒ ä¸è¦ç›´æ¥å®ä¾‹åŒ– Controller: `HomeController()`
- âŒ ä¸è¦åœ¨ Widget ä¸­åˆ›å»ºæœåŠ¡å®ä¾‹
- âŒ ä¸è¦è·³è¿‡ Binding å±‚ç›´æ¥æ³¨å…¥ä¾èµ–

### UI å±‚
- âŒ ä¸è¦åœ¨ View ä¸­å¤„ç†ä¸šåŠ¡é€»è¾‘
- âŒ ä¸è¦åœ¨ View ä¸­ç›´æ¥è°ƒç”¨ API
- âŒ ä¸è¦ç¡¬ç¼–ç å­—ç¬¦ä¸²å’Œæ ·å¼

### å›½é™…åŒ–
- âŒ ä¸è¦åœ¨ UI ä¸­ç¡¬ç¼–ç æ–‡æœ¬å­—ç¬¦ä¸²
- âŒ ä¸è¦ç›´æ¥ä½¿ç”¨ Localizations.of(context)
- âŒ ä¸è¦å¿˜è®°ä¸ºæ–°å­—ç¬¦ä¸²æ·»åŠ ç¿»è¯‘
- âŒ ä¸è¦ä½¿ç”¨ä¸ä¸€è‡´çš„è¯­è¨€ä»£ç æ ¼å¼

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å“åº”å¼ç¼–ç¨‹
```dart
// âœ… ä½¿ç”¨ Rx å˜é‡
final RxBool isLoading = false.obs;
final RxString message = ''.obs;
final RxList<Item> items = <Item>[].obs;

// âœ… åœ¨ UI ä¸­ä½¿ç”¨ Obx
Obx(() => Text(controller.message.value))
```

### 2. çŠ¶æ€å¤„ç†
```dart
// âœ… ä½¿ç”¨ StateMixin å¤„ç†å¼‚æ­¥çŠ¶æ€
class MyController extends GetxController with StateMixin<MyData> {
  void loadData() async {
    change(null, status: RxStatus.loading());
    // ... API è°ƒç”¨
    change(data, status: RxStatus.success());
  }
}
```

### 3. è·¯ç”±ç®¡ç†
```dart
// âœ… ä½¿ç”¨å‘½åè·¯ç”±
Get.toNamed(AppRoutes.home);
Get.offNamed(AppRoutes.login);
Get.offAllNamed(AppRoutes.home);

// âœ… ä¼ é€’å‚æ•°
Get.toNamed(AppRoutes.details, arguments: {'id': 123});
```

### 4. ä¸»é¢˜ç®¡ç†
```dart
// âœ… ä½¿ç”¨ GetX ä¸»é¢˜åˆ‡æ¢
Get.changeThemeMode(ThemeMode.dark);
Get.isDarkMode; // æ£€æŸ¥å½“å‰ä¸»é¢˜
```

### 5. å›½é™…åŒ–
```dart
// âœ… ä½¿ç”¨ GetX å›½é™…åŒ–
Get.updateLocale(const Locale('zh', 'CN'));

// âœ… åœ¨ UI ä¸­ä½¿ç”¨ç¿»è¯‘æ–‡æœ¬
Text('welcome_title'.tr)

// âœ… å¸¦å‚æ•°çš„ç¿»è¯‘
Text('theme_switched'.trParams({'mode': 'dark'}))

// âœ… è¯­è¨€åˆ‡æ¢
final localizationService = Get.find<LocalizationService>();
localizationService.toggleLanguage();
```

### 6. å›½é™…åŒ–æœ€ä½³å®è·µ
```dart
// âœ… åˆ›å»ºå®Œæ•´çš„ç¿»è¯‘æ˜ å°„
class AppTranslations extends Translations {
  @override
  Map<String, Map<String, String>> get keys => {
    'en_US': {'welcome': 'Welcome'},
    'zh_CN': {'welcome': 'æ¬¢è¿'},
  };
}

// âœ… ä½¿ç”¨ LocalizationService ç®¡ç†è¯­è¨€çŠ¶æ€
class LocalizationService extends GetxService {
  void changeLanguage(String languageCode) {
    // å®ç°è¯­è¨€åˆ‡æ¢é€»è¾‘
  }
}

// âœ… åœ¨ Controller ä¸­ä½¿ç”¨å›½é™…åŒ–
class MyController extends GetxController {
  void showMessage() {
    Get.snackbar('success'.tr, 'operation_completed'.tr);
  }
}
```

## ğŸ”§ å·¥å…·å’Œä¾èµ–

### å¿…éœ€ä¾èµ–
- `get: ^4.6.6` - GetX æ ¸å¿ƒ
- `dio: ^5.4.0` - ç½‘ç»œè¯·æ±‚
- `freezed: ^2.4.6` - æ•°æ®æ¨¡å‹
- `json_annotation: ^4.8.1` - JSON åºåˆ—åŒ–
- `get_storage: ^2.1.1` - æœ¬åœ°å­˜å‚¨
- `flutter_localizations` - å›½é™…åŒ–æ”¯æŒ
- `intl` - å›½é™…åŒ–å·¥å…·

### æ¨èä¾èµ–
- `flutter_lints: ^5.0.0` - ä»£ç è§„èŒƒ
- `build_runner: ^2.4.7` - ä»£ç ç”Ÿæˆ

## ğŸ“± UI/UX æŒ‡å¯¼

### è®¾è®¡åŸåˆ™
- ä½¿ç”¨ Material 3 è®¾è®¡è§„èŒƒ
- æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- å“åº”å¼è®¾è®¡ï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- ä¼˜é›…çš„åŠ è½½å’Œé”™è¯¯çŠ¶æ€å¤„ç†

### äº¤äº’åé¦ˆ
- ä½¿ç”¨ GetX çš„ snackbar: `Get.snackbar()`
- ä½¿ç”¨ GetX çš„ dialog: `Get.dialog()`
- åˆç†çš„åŠ è½½æŒ‡ç¤ºå™¨å’Œé”™è¯¯æç¤º

## ğŸ§ª æµ‹è¯•æŒ‡å¯¼

### å•å…ƒæµ‹è¯•
- ä¸ºæ¯ä¸ª Controller ç¼–å†™å•å…ƒæµ‹è¯•
- ä½¿ç”¨ GetX çš„æµ‹è¯•å·¥å…·
- Mock å¤–éƒ¨ä¾èµ– (API æœåŠ¡)

### Widget æµ‹è¯•
- æµ‹è¯• UI äº¤äº’å’ŒçŠ¶æ€å˜åŒ–
- ä½¿ç”¨ `testWidgets` å’Œ GetX testing utilities

## ğŸ“š æ–°åŠŸèƒ½å¼€å‘æµç¨‹

1. **åˆ›å»º Feature ç›®å½•ç»“æ„**
   ```
   features/new_feature/
   â”œâ”€â”€ controllers/
   â”œâ”€â”€ views/
   â””â”€â”€ bindings/
   ```

2. **å®šä¹‰æ•°æ®æ¨¡å‹** (å¦‚æœéœ€è¦)
   - ä½¿ç”¨ Freezed åˆ›å»ºä¸å¯å˜æ¨¡å‹
   - æ·»åŠ  JSON åºåˆ—åŒ–æ”¯æŒ

3. **åˆ›å»º Controller**
   - ç»§æ‰¿ GetxController
   - ä½¿ç”¨ StateMixin å¤„ç†å¼‚æ­¥çŠ¶æ€
   - å®ç°ä¸šåŠ¡é€»è¾‘æ–¹æ³•

4. **åˆ›å»º View**
   - ç»§æ‰¿ GetView<ControllerType>
   - ä½¿ç”¨ controller.obx() å¤„ç†çŠ¶æ€
   - ä¿æŒ UI çº¯å‡€ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘

5. **åˆ›å»º Binding**
   - æ³¨å†Œæ‰€éœ€çš„æœåŠ¡å’Œ Controller
   - ä½¿ç”¨ lazyPut è¿›è¡Œæ‡’åŠ è½½

6. **æ›´æ–°è·¯ç”±é…ç½®**
   - åœ¨ AppRoutes ä¸­æ·»åŠ è·¯ç”±å¸¸é‡
   - åœ¨ AppPages ä¸­æ·»åŠ è·¯ç”±é…ç½®

## ğŸ” ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•

- [ ] æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº† GetX æ¶æ„æ¨¡å¼ï¼Ÿ
- [ ] Controller æ˜¯å¦æ­£ç¡®å¤„ç†äº†å¼‚æ­¥çŠ¶æ€ï¼Ÿ
- [ ] View æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº† controller.obx()ï¼Ÿ
- [ ] æ˜¯å¦æ­£ç¡®é…ç½®äº† Bindingï¼Ÿ
- [ ] æ•°æ®æ¨¡å‹æ˜¯å¦ä½¿ç”¨äº† Freezedï¼Ÿ
- [ ] ç½‘ç»œè¯·æ±‚æ˜¯å¦é€šè¿‡ NetworkServiceï¼Ÿ
- [ ] æ˜¯å¦æœ‰é€‚å½“çš„é”™è¯¯å¤„ç†ï¼Ÿ
- [ ] UI æ˜¯å¦æ”¯æŒåŠ è½½å’Œé”™è¯¯çŠ¶æ€ï¼Ÿ
- [ ] ä»£ç æ˜¯å¦éµå¾ªäº†å‘½åè§„èŒƒï¼Ÿ
- [ ] æ˜¯å¦æœ‰é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£ï¼Ÿ
- [ ] æ‰€æœ‰ç”¨æˆ·å¯è§æ–‡æœ¬æ˜¯å¦ä½¿ç”¨äº†å›½é™…åŒ–ï¼Ÿ
- [ ] æ˜¯å¦ä¸ºæ‰€æœ‰æ”¯æŒçš„è¯­è¨€æ·»åŠ äº†ç¿»è¯‘ï¼Ÿ
- [ ] è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ
- [ ] å›½é™…åŒ–æ–‡æœ¬æ˜¯å¦ä½¿ç”¨äº†ä¸€è‡´çš„ key å‘½åï¼Ÿ

---

**è®°ä½**: è¿™äº›è§„èŒƒä¸ä»…ä»…æ˜¯å»ºè®®ï¼Œè€Œæ˜¯é¡¹ç›®çš„å¼ºåˆ¶è¦æ±‚ã€‚æ‰€æœ‰æ–°ä»£ç éƒ½å¿…é¡»ä¸¥æ ¼éµå¾ªè¿™äº›åŸåˆ™ï¼Œä»¥ç¡®ä¿ä»£ç åº“çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¹¶æ ¹æ®æ–°å¢åŠ çš„featureï¼Œæ›´æ–°é¡¹ç›®ç¼–ç è§„èŒƒä¸æ¶æ„åŸåˆ™ï¼Œå¹¶æ›´æ–°.cursor/rules/project.MDCæ–‡ä»¶ã€‚